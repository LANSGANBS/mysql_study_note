# 函数

- 字符串函数
mysql内置的常用函数字符串函数如下表所示：

| 函数                       | 功能                               |
|--------------------------|----------------------------------|
| concat(S1,S2,..,Sn)      | 字符串拼接，将S1,S2,...,Sn拼接成一个字符串      |
| lower(str)               | 将字符串str全部转为小写                    |
| upper(str)               | 将字符串str全部转为大写                    |
| lpad(str,n,pad)          | 左填充，用字符串pad对str的左边进行填充，达到n个字符串长度 |
| rpad(str,n,pad)          | 右填充，用字符串pad对str的右边进行填充，达到n个字符串长度 |
| trim(str)                | 去掉字符串头部和尾部的空格                    |
| substring(str,start,len) | 返回从字符串str从start位置起的len个长度的字符串    |

```sql
    select concat('Hello','Mysql');
    select lower('Hello');
    select upper('Hello');
    select lpad('01',20,'_');
    select rpad('01',20,'_');
    select trim(' Hello Mysql ');
    select substring('Hello Mysql',1,5); -- 字符串第1个位置索引为1，不是0
```

eg:

业务需求变更，企业员工的工号，统一为5位数，目前不足5位数的全部在前面补0。比如：1号员工的工号应该为00001。

```sql
    update emp set workno = lpad(workno, 5, '0');
```
- 数值函数

| 函数         | 功能                  |
|------------|---------------------|
| ceil(x)    | 向上取整                |
| floor(x)   | 向下取整                |
| mod(x,y)   | 返回x%y               |
| rand()     | 返回0-1内的随机数          |
| round(x,y) | 求参数x的四舍五入的值，保留y位小数  |

```sql
    select ceil(1.5);
    select floor(1.5);
    select mod(5,2);
    select rand();
    select round(2.7623845,2);
```
eg:

通过数据库的函数，生成一个六位数的随机验证码。

```sql
    select rpad(round(rand()*1000000, 0), 6, '0'); -- 如0.0444000...*1000000=44400,需要考虑不足六位，利用rpad/lpad补0
```
